<dl i18n:domain="plone"
    ng-app="chat"
    tal:attributes="class string:portlet portlet-firebaseplonedemo ${view/css_class};
      ng-init string:firebase_url = '${view/data/firebase_url}';; auth_token = '${view/auth_token}'"
    >

    <dt class="portletHeader"
        tal:define="header view/data/header"
        tal:attributes="class python:header and 'portletHeader' or 'portletHeader titleless'">
        <span class="portletTopLeft"></span>
        <span tal:content="header"></span>
        <span class="portletTopRight"></span>
    </dt>

    <dd class="portletItem odd">

        <div ng-controller="Chat">
          <div>
            <label for="">Your name: </label><input type="text" ng-model="username">
          </div>
          <p></p>
          <div id="messagesDiv" class="messagesDiv" style="height:500px; overflow: auto;">
            <div ng-cloak ng-repeat="message in messages"
                 class="chat-line-{{{true: 'own', false: 'foreign'}[message.from == username]}}">
              <div class="chat-sender">{{message.from}}:</div>
              <div class="chat-content">{{message.content}}</div>
            </div>
          </div>
          <form ng-submit="addMessage()">
            <input type="text" ng-model="message" placeholder="Message...">
            <input type="submit" id="submit" value="Send" style="font-size:24px;">
          </form>
        </div>

        <tal:corners>
            <span class="portletBottomLeft"></span>
            <span class="portletBottomRight"></span>
        </tal:corners>

    </dd>

</dl>
